<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³•è¯­åŠ¨è¯å˜ä½ç‰¹è®­ (A1)</title>
    <style>
        :root {
            --primary: #4285F4;
            --success: #34A853;
            --error: #EA4335;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 40px;
            width: 100%;
            max-width: 500px;
            text-align: center;
            transition: transform 0.2s;
        }

        h1 {
            color: #333;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .counter {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 30px;
        }

        .question-box {
            margin: 30px 0;
            font-size: 1.8rem;
            color: #202124;
            line-height: 1.5;
        }

        .verb-highlight {
            color: var(--primary);
            font-weight: bold;
        }

        input[type="text"] {
            width: 80%;
            padding: 12px 20px;
            font-size: 1.2rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            outline: none;
            transition: border-color 0.3s;
            text-align: center;
        }

        input[type="text"]:focus {
            border-color: var(--primary);
        }

        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 32px;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: 600;
            transition: background 0.2s;
        }

        .btn:hover {
            background-color: #3367d6;
        }

        .feedback {
            margin-top: 20px;
            min-height: 50px;
            font-size: 1.1rem;
        }

        .correct { color: var(--success); font-weight: bold; }
        .incorrect { color: var(--error); }
        .answer-reveal { display: block; margin-top: 5px; color: #555; font-size: 0.9rem; }

        .accents {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .accent-btn {
            background: #e8f0fe;
            border: none;
            color: var(--primary);
            width: 30px;
            height: 30px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }

        .accent-btn:hover { background: #d2e3fc; }

    </style>
</head>
<body>

<div class="card">
    <h1>ğŸ‡«ğŸ‡· åŠ¨è¯å˜ä½ç»ƒä¹ </h1>
    <div class="counter">éšæœºæŠ½å– â€¢ ç›´é™ˆå¼ç°åœ¨æ—¶</div>

    <div class="question-box" id="questionDisplay">
        åŠ è½½ä¸­...
    </div>

    <input type="text" id="userAnswer" placeholder="åœ¨æ­¤è¾“å…¥å˜ä½" autocomplete="off">
    
    <div class="accents">
        <button class="accent-btn" onclick="addAccent('Ã©')">Ã©</button>
        <button class="accent-btn" onclick="addAccent('Ã¨')">Ã¨</button>
        <button class="accent-btn" onclick="addAccent('Ãª')">Ãª</button>
        <button class="accent-btn" onclick="addAccent('Ã§')">Ã§</button>
        <button class="accent-btn" onclick="addAccent('Ã ')">Ã </button>
        <button class="accent-btn" onclick="addAccent('Ã»')">Ã»</button>
        <button class="accent-btn" onclick="addAccent('Ã®')">Ã®</button>
    </div>

    <button class="btn" id="actionBtn" onclick="checkAnswer()">æäº¤ (EntrÃ©e)</button>

    <div class="feedback" id="feedback"></div>
</div>

<script>
    // å®Œæ•´çš„51ä¸ªåŠ¨è¯å˜ä½æ•°æ® (ç›´é™ˆå¼ç°åœ¨æ—¶)
    const verbData = {
        "Apprendre": ["apprends", "apprends", "apprend", "apprenons", "apprenez", "apprennent"],
        "Faire": ["fais", "fais", "fait", "faisons", "faites", "font"],
        "Venir": ["viens", "viens", "vient", "venons", "venez", "viennent"],
        "Aimer": ["aime", "aimes", "aime", "aimons", "aimez", "aiment"],
        "Parler": ["parle", "parles", "parle", "parlons", "parlez", "parlent"],
        "Travailler": ["travaille", "travailles", "travaille", "travaillons", "travaillez", "travaillent"],
        "Profiter": ["profite", "profites", "profite", "profitons", "profitez", "profitent"],
        "Visiter": ["visite", "visites", "visite", "visitons", "visitez", "visitent"],
        "Aller": ["vais", "vas", "va", "allons", "allez", "vont"],
        "Ã‰crire": ["Ã©cris", "Ã©cris", "Ã©crit", "Ã©crivons", "Ã©crivez", "Ã©crivent"],
        "Ã‰couter": ["Ã©coute", "Ã©coutes", "Ã©coute", "Ã©coutons", "Ã©coutez", "Ã©coutent"],
        "Inviter": ["invite", "invites", "invite", "invitons", "invitez", "invitent"],
        "Aider": ["aide", "aides", "aide", "aidons", "aidez", "aident"],
        "Vouloir": ["veux", "veux", "veut", "voulons", "voulez", "veulent"],
        "Pouvoir": ["peux", "peux", "peut", "pouvons", "pouvez", "peuvent"],
        "Devenir": ["deviens", "deviens", "devient", "devenons", "devenez", "deviennent"],
        "Sâ€™adresser": ["m'adresse", "t'adresses", "s'adresse", "nous adressons", "vous adressez", "s'adressent"],
        "Habiter": ["habite", "habites", "habite", "habitons", "habitez", "habitent"],
        "Prendre": ["prends", "prends", "prend", "prenons", "prenez", "prennent"],
        "Monter": ["monte", "montes", "monte", "montons", "montez", "montent"],
        "Suivre": ["suis", "suis", "suit", "suivons", "suivez", "suivent"],
        "Voir": ["vois", "vois", "voit", "voyons", "voyez", "voient"],
        "Lire": ["lis", "lis", "lit", "lisons", "lisez", "lisent"],
        "Louer": ["loue", "loues", "loue", "louons", "louez", "louent"],
        "Indiquer": ["indique", "indiques", "indique", "indiquons", "indiquez", "indiquent"],
        "TÃ©lÃ©phoner": ["tÃ©lÃ©phone", "tÃ©lÃ©phones", "tÃ©lÃ©phone", "tÃ©lÃ©phonons", "tÃ©lÃ©phonez", "tÃ©lÃ©phonent"],
        "Voyager": ["voyage", "voyages", "voyage", "voyageons", "voyagez", "voyagent"],
        "Regarder": ["regarde", "regardes", "regarde", "regardons", "regardez", "regardent"],
        "Passer": ["passe", "passes", "passe", "passons", "passez", "passent"],
        "Comprendre": ["comprends", "comprends", "comprend", "comprenons", "comprenez", "comprennent"],
        "Sortir": ["sors", "sors", "sort", "sortons", "sortez", "sortent"],
        "RÃ©ussir": ["rÃ©ussis", "rÃ©ussis", "rÃ©ussit", "rÃ©ussissons", "rÃ©ussissez", "rÃ©ussissent"],
        "Savoir": ["sais", "sais", "sait", "savons", "savez", "savent"],
        "Poursuivre": ["poursuis", "poursuis", "poursuit", "poursuivons", "poursuivez", "poursuivent"],
        "Donner": ["donne", "donnes", "donne", "donnons", "donnez", "donnent"],
        "Redoubler": ["redouble", "redoubles", "redouble", "redoublons", "redoublez", "redoublent"],
        "Se lever": ["me lÃ¨ve", "te lÃ¨ves", "se lÃ¨ve", "nous levons", "vous levez", "se lÃ¨vent"],
        "Se coucher": ["me couche", "te couches", "se couche", "nous couchons", "vous couchez", "se couchent"],
        "Partir": ["pars", "pars", "part", "partons", "partez", "partent"],
        "Trouver": ["trouve", "trouves", "trouve", "trouvons", "trouvez", "trouvent"],
        "Rencontrer": ["rencontre", "rencontres", "rencontre", "rencontrons", "rencontrez", "rencontrent"],
        "Recevoir": ["reÃ§ois", "reÃ§ois", "reÃ§oit", "recevons", "recevez", "reÃ§oivent"],
        "Retourner": ["retourne", "retournes", "retourne", "retournons", "retournez", "retournent"],
        "Laisser": ["laisse", "laisses", "laisse", "laissons", "laissez", "laissent"],
        "Prier": ["prie", "pries", "prie", "prions", "priez", "prient"],
        "ConnaÃ®tre": ["connais", "connais", "connaÃ®t", "connaissons", "connaissez", "connaissent"],
        "Offrir": ["offre", "offres", "offre", "offrons", "offrez", "offrent"],
        "PrÃ©senter": ["prÃ©sente", "prÃ©sentes", "prÃ©sente", "prÃ©sentons", "prÃ©sentez", "prÃ©sentent"],
        "Fumer": ["fume", "fumes", "fume", "fumons", "fumez", "fument"],
        "Refuser": ["refuse", "refuses", "refuse", "refusons", "refusez", "refusent"],
        "Accepter": ["accepte", "acceptes", "accepte", "acceptons", "acceptez", "acceptent"]
    };

    const pronouns = ["Je/J'", "Tu", "Il/Elle/On", "Nous", "Vous", "Ils/Elles"];
    // ç®€å•çš„æ˜ å°„ï¼Œç”¨äºæ˜¾ç¤ºé¢˜ç›®çš„ä¸»è¯­
    const displayPronouns = ["Je", "Tu", "Il", "Nous", "Vous", "Ils"];

    let currentVerb = "";
    let currentPronounIndex = 0;
    let correctAnswer = "";
    let state = "input"; // input or result

    function getRandomItem(obj) {
        const keys = Object.keys(obj);
        return keys[Math.floor(Math.random() * keys.length)];
    }

    function generateQuestion() {
        state = "input";
        currentVerb = getRandomItem(verbData);
        currentPronounIndex = Math.floor(Math.random() * 6);
        correctAnswer = verbData[currentVerb][currentPronounIndex];

        // ç‰¹æ®Šå¤„ç†çœéŸ³ Je -> J' (å¦‚æœç­”æ¡ˆä»¥å…ƒéŸ³å¼€å¤´)
        let displaySubject = displayPronouns[currentPronounIndex];
        
        // ç®€å•çš„çœéŸ³é€»è¾‘å¤„ç†ï¼šå¦‚æœæ˜¯ç¬¬ä¸€äººç§°ï¼Œä¸”åŠ¨è¯æ˜¯S'adresser(å·²åŒ…å«m')æˆ–ç­”æ¡ˆä»¥å…ƒéŸ³å¼€å¤´
        // ä½†ä¸ºäº†å¡«ç©ºç»ƒä¹ æ¸…æ™°ï¼Œæˆ‘ä»¬é€šå¸¸æ˜¾ç¤º Je _____ (aimer)ï¼Œè®©ç”¨æˆ·è‡ªå·±å¡« aime æˆ– j'aime (å¦‚æœæ˜¯æ•´å¥)
        // æœ¬ç»ƒä¹ è®¾è®¡ä¸ºï¼šä¸»è¯­å·²ç»™å‡ºï¼Œç”¨æˆ·åªå¡«å˜ä½åŠ¨è¯ã€‚
        // å¯¹äºä»£è¯å¼åŠ¨è¯ (Se lever)ï¼Œç”¨æˆ·éœ€è¦å¡« "me lÃ¨ve" æˆ– "te lÃ¨ves"ã€‚
        
        // æ˜¾ç¤ºé€»è¾‘
        let verbDisplay = currentVerb;
        if(currentVerb === "Sâ€™adresser" || currentVerb === "Se lever" || currentVerb === "Se coucher") {
            // ä»£è¯å¼åŠ¨è¯æç¤º
            verbDisplay = currentVerb + " (ä»£è¯å¼)";
        }

        document.getElementById('questionDisplay').innerHTML = 
            `${displaySubject} <span class="verb-highlight">__________</span> (${verbDisplay})`;
        
        document.getElementById('userAnswer').value = "";
        document.getElementById('userAnswer').className = "";
        document.getElementById('feedback').innerHTML = "";
        document.getElementById('actionBtn').innerText = "æäº¤";
        document.getElementById('actionBtn').style.backgroundColor = "var(--primary)";
        document.getElementById('userAnswer').focus();
    }

    function checkAnswer() {
        if (state === "result") {
            generateQuestion();
            return;
        }

        let input = document.getElementById('userAnswer').value.trim().toLowerCase();
        // ç§»é™¤å¤šä½™ç©ºæ ¼
        input = input.replace(/\s+/g, ' ');

        if (input === "") return;

        let isCorrect = (input === correctAnswer.toLowerCase());

        // å¯¹äºä»¥å…ƒéŸ³å¼€å¤´çš„Jeï¼Œå¦‚æœç”¨æˆ·å†™äº† j'aime ä¹Ÿæ˜¯å¯¹çš„ï¼Œè™½ç„¶æˆ‘ä»¬åªè¦ aime
        // è¿™é‡Œåšä¸€ä¸ªç®€å•çš„å®½å®¹å¤„ç†
        if (!isCorrect && currentPronounIndex === 0) {
            if (input === "j'" + correctAnswer || input === "jâ€™" + correctAnswer) {
                isCorrect = true;
            }
        }

        const feedback = document.getElementById('feedback');
        
        if (isCorrect) {
            feedback.innerHTML = `<span class="correct">ğŸ‰ C'est correct ! (å¤ªæ£’äº†)</span>`;
            document.getElementById('actionBtn').style.backgroundColor = "var(--success)";
        } else {
            feedback.innerHTML = `
                <span class="incorrect">âŒ C'est faux. (ç­”é”™äº†)</span>
                <span class="answer-reveal">æ­£ç¡®ç­”æ¡ˆæ˜¯: <strong>${correctAnswer}</strong></span>
            `;
            document.getElementById('actionBtn').style.backgroundColor = "var(--error)";
        }

        document.getElementById('questionDisplay').innerHTML = 
            `${displayPronouns[currentPronounIndex]} <span class="verb-highlight">${correctAnswer}</span> (${currentVerb})`;

        document.getElementById('actionBtn').innerText = "ä¸‹ä¸€é¢˜ (EntrÃ©e)";
        state = "result";
    }

    function addAccent(char) {
        const input = document.getElementById('userAnswer');
        input.value += char;
        input.focus();
    }

    // ç›‘å¬å›è½¦é”®
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            checkAnswer();
        }
    });

    // åˆå§‹åŒ–
    generateQuestion();

</script>

</body>
</html>
